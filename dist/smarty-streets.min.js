angular.module("org.crossroads.smartyStreets.services",["ngResource","smartyStreetsConfig"]),angular.module("org.crossroads.smartyStreets.services").factory("SmartyStreetsSuggestionFactory",["$resource","$q","SmartyToken",function(a,b,c){var d=a("https://autocomplete-api.smartystreets.com/suggest",{"auth-id":c,prefix:"1600 Amphitheatre Parkway",callback:"JSON_CALLBACK"},{get:{method:"JSONP"}});return getSuggestions=function(a){var c=b.defer();return d.get({prefix:a},function(a){c.resolve(a)}),c.promise},{getSuggestions:getSuggestions}}]).factory("SmartyStreetsValidationFactory",["$resource","$q","SmartyToken",function(a,b,c){var d=a("https://api.smartystreets.com/street-address",{"auth-token":c,street:"1600 Amphitheatre Parkway",street2:"",city:"Mountain View",state:"CA",zipcode:"",candidates:"10",callback:"JSON_CALLBACK"},{get:{method:"JSONP",isArray:!0}}),e=function(a){var c=b.defer();return d.get({street:a.street_line,street2:a.addressLine2,city:a.city,state:a.state,zipcode:a.zipCode},function(a){c.resolve(a)},function(a){c.reject(a)}),c.promise};return{doValidation:e}}]),angular.module("org.crossroads.smartyStreets.controllers",["org.crossroads.smartyStreets.services","mgcrea.ngStrap.typeahead"]),angular.module("org.crossroads.smartyStreets.controllers").controller("AddressFormController",["$scope","SmartyStreetsSuggestionFactory","SmartyStreetsValidationFactory",function(a,b,c){a.address={},a.addresses=[],a.getAddress=function(c){return null!=c&&""!=c?b.getSuggestions(c).then(function(b){return a.addresses=b.suggestions,1==b.suggestions.length?(a.address=b.suggestions[0],[]):b.suggestions}):void 0},a.$on("$typeahead.select",function(b,c,d){a.address=a.addresses[d]}),a.validateAddress=function(){return c.doValidation(a.address).then(function(b){angular.isArray(b)&&b.length>0&&(a.address.street_line=b[0].delivery_line_1,a.address.city=b[0].components.city_name,a.address.state=b[0].components.state_abbreviation,a.address.zipCode=b[0].components.zipcode+"-"+b[0].components.plus4_code)},function(){console.log("got an error in validation")})},a.$watch("address",function(b,c){b!==c&&a.validateAddress()},!0)}]),angular.module("org.crossroads.smartyStreets.directives",["org.crossroads.smartyStreets.controllers"]),angular.module("org.crossroads.smartyStreets.directives").directive("crdsValidatedAddress",function(){return{restrict:"E",scope:{address:"="},controller:"AddressFormController",templateUrl:"/templates/address-form.tpl.html"}}),angular.module("CrossroadsUserForm",["org.crossroads.smartyStreets"]).controller("CrossroadsUserFormController",["$scope",function(a){a.form={address:{}},a.submit=function(){}}]);